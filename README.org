#+caption: CARBS
[[file:pics/carbs.jpg]]

* CARBS v0.3.1

Chad Arch Random Bootstrap Scripts - bootstrap a fresh Arch Linux into a comfy daily driver.

* Install

** Prerequisites

Fresh Arch install with network access. Ensure your user is in the wheel group:

#+begin_example
%wheel ALL=(ALL) ALL
#+end_example

** Quick Install

#+begin_src sh
curl -fsSL https://raw.githubusercontent.com/sthysel/carbs/main/install.sh | bash
cd ~/.config/dotfiles
caifs add -d targets '*'
#+end_src

** Manual Install

#+begin_src sh
sudo pacman -S --needed git base-devel
git clone https://aur.archlinux.org/yay.git && cd yay && makepkg -si && cd ..
yay -S caifs
git clone https://github.com/sthysel/carbs.git ~/.config/dotfiles
cd ~/.config/dotfiles
caifs add -d targets '*'
#+end_src

* CAIFS

CARBS uses [[https://github.com/caifs-org/caifs][CAIFS]] (Config And Installers For Software) to manage dotfiles.

** Structure

#+begin_example
~/.config/dotfiles/
├── targets/           # Dotfile packages (each is a "target")
│   └── <package>/
│       ├── config/    # Files to symlink (mirrored to $HOME)
│       └── hooks/     # pre.sh/post.sh/rm.sh scripts
└── lib/               # Shared helper functions for hooks
#+end_example

** Commands

| Command                          | Purpose                         |
|----------------------------------+---------------------------------|
| =caifs status -d targets=        | Show deployment status          |
| =caifs add -d targets <target>=  | Deploy + run hooks              |
| =caifs add -d targets -l <t>=    | Deploy (symlink only)           |
| =caifs add -d targets -h <t>=    | Run hooks only                  |
| =caifs rm -d targets <target>=   | Undeploy + run rm hooks         |
| =caifs add -d targets -f <t>=    | Force deploy (override)         |
| =caifs add -d targets '*'=       | Deploy all targets              |

** Hooks

#+begin_example
targets/<package>/hooks/
├── pre.sh      # Before symlinking (install deps)
├── post.sh     # After symlinking (enable services)
└── rm.sh       # During removal (cleanup)
#+end_example

Hooks support OS-specific functions that execute based on the detected platform:

#+begin_src sh
arch() { yay -S package; }      # Arch Linux
debian() { apt install pkg; }   # Debian/Ubuntu
macos() { brew install pkg; }   # macOS
linux() { echo "any linux"; }   # Generic Linux fallback
generic() { echo "all OS"; }    # All platforms
#+end_src

** Packages

| Package      | Description                                                     |
|--------------+-----------------------------------------------------------------|
| asciinema    | Terminal session recorder config                                |
| autostart    | XDG autostart desktop entries                                   |
| awscli       | AWS CLI v2 with bash completion                                 |
| azure-cli    | Azure CLI with bash/zsh completion (via uv)                     |
| beets        | Music library manager with plugins (via uv)                     |
| bootstrap    | Core system packages and yay/uv installation                    |
| conky        | System monitor widget config                                    |
| dive         | Docker image layer explorer                                     |
| docker       | Docker engine and user group setup                              |
| dpi          | X11 DPI and display scaling settings                            |
| dunst        | Notification daemon config                                      |
| editorconfig | Standard editorconfig for code projects                         |
| emoji        | Emoji list and rofi-emoji picker script                         |
| entropy      | Hardware RNG entropy daemon (rng-tools)                         |
| fonts        | Nerd fonts, Fira Code, Font Awesome, etc.                       |
| git          | Git configuration                                               |
| gps          | GPS daemon (gpsd) and tools                                     |
| hyprland     | Hyprland Wayland compositor config                              |
| i3           | i3 window manager config and scripts                            |
| just         | Just command runner with LSP and completions                    |
| kitty        | Kitty terminal emulator config                                  |
| local-bin    | Custom scripts in ~/.local/bin                                  |
| locale       | System locale configuration (en_AU, en_US, af_ZA)               |
| mpd          | Music Player Daemon config and service                          |
| nobeep       | Disable PC speaker beep                                         |
| nvidia       | NVIDIA drivers and initcpio update hook                         |
| nvim         | Neovim (LazyVim) config                                         |
| oh-my-posh   | Oh My Posh prompt theme                                         |
| oras         | OCI Registry As Storage - push/pull OCI artifacts to registries |
| pam          | PAM environment variables                                       |
| picom        | X11 compositor config                                           |
| pipewire     | PipeWire audio stack and services                               |
| python-dev   | Python dev tools (ruff, pytest, poetry via uv)                  |
| ranger       | Ranger file manager (via uv)                                    |
| rofi         | Application launcher config                                     |
| spacemacs    | Spacemacs/Emacs config and layers                               |
| ssh          | OpenSSH and ssh-agent service                                   |
| starship     | Starship prompt config                                          |
| usbdrive     | USB automounting (udisks2/udiskie)                              |
| uwsm         | Universal Wayland Session Manager config                        |
| wallpaper    | Desktop wallpapers                                              |
| waybar       | Wayland status bar config                                       |
| waypaper     | Wallpaper manager config                                        |
| webex        | Webex desktop entry                                             |
| yazi         | Yazi terminal file manager config and plugins                   |
| zsh          | Zsh shell config and aliases                                    |
